{
  "migrationFile": {
    "version": "1.0.0",
    "description": "Manages organizations, employees, trainers, departments, teams, and directory workflows.",
    "database": {
      "tables": [
        {
          "name": "companies",
          "schema": {
            "id": "uuid",
            "company_name": "string",
            "industry": "string",
            "domain": "string",
            "hr_contact_name": "string",
            "hr_contact_email": "string",
            "hr_contact_role": "string",
            "verification_status": "string",
            "approval_policy": "string",
            "kpis": "text",
            "logo_url": "string",
            "passing_grade": "integer",
            "max_attempts": "integer",
            "exercises_limited": "boolean",
            "num_of_exercises": "integer",
            "created_at": "timestamp",
            "updated_at": "timestamp"
          }
        },
        {
          "name": "departments",
          "schema": {
            "id": "uuid",
            "company_id": "uuid",
            "department_id": "string",
            "department_name": "string",
            "created_at": "timestamp",
            "updated_at": "timestamp"
          }
        },
        {
          "name": "teams",
          "schema": {
            "id": "uuid",
            "company_id": "uuid",
            "department_id": "uuid",
            "team_id": "string",
            "team_name": "string",
            "created_at": "timestamp",
            "updated_at": "timestamp"
          }
        },
        {
          "name": "employees",
          "schema": {
            "id": "uuid",
            "company_id": "uuid",
            "employee_id": "string",
            "full_name": "string",
            "email": "string",
            "password_hash": "string",
            "current_role_in_company": "string",
            "target_role_in_company": "string",
            "preferred_language": "string",
            "status": "string",
            "bio": "text",
            "profile_photo_url": "string",
            "linkedin_url": "string",
            "github_url": "string",
            "linkedin_data": "jsonb",
            "github_data": "jsonb",
            "enrichment_completed": "boolean",
            "enrichment_completed_at": "timestamp",
            "profile_status": "string",
            "value_proposition": "text",
            "created_at": "timestamp",
            "updated_at": "timestamp"
          }
        },
        {
          "name": "employee_roles",
          "schema": {
            "id": "uuid",
            "employee_id": "uuid",
            "role_type": "string",
            "created_at": "timestamp"
          }
        },
        {
          "name": "employee_teams",
          "schema": {
            "id": "uuid",
            "employee_id": "uuid",
            "team_id": "uuid",
            "created_at": "timestamp"
          }
        },
        {
          "name": "employee_managers",
          "schema": {
            "id": "uuid",
            "employee_id": "uuid",
            "manager_id": "uuid",
            "relationship_type": "string",
            "created_at": "timestamp"
          }
        },
        {
          "name": "employee_project_summaries",
          "schema": {
            "id": "uuid",
            "employee_id": "uuid",
            "repository_name": "string",
            "repository_url": "string",
            "summary": "text",
            "created_at": "timestamp"
          }
        },
        {
          "name": "trainer_settings",
          "schema": {
            "id": "uuid",
            "employee_id": "uuid",
            "ai_enabled": "boolean",
            "public_publish_enable": "boolean",
            "created_at": "timestamp",
            "updated_at": "timestamp"
          }
        },
        {
          "name": "audit_logs",
          "schema": {
            "id": "uuid",
            "company_id": "uuid",
            "user_id": "uuid",
            "action_type": "string",
            "resource_type": "string",
            "resource_id": "uuid",
            "action_details": "jsonb",
            "ip_address": "string",
            "user_agent": "string",
            "created_at": "timestamp"
          }
        },
        {
          "name": "company_registration_requests",
          "schema": {
            "id": "uuid",
            "company_name": "string",
            "industry": "string",
            "domain": "string",
            "hr_contact_name": "string",
            "hr_contact_email": "string",
            "hr_contact_role": "string",
            "verification_status": "string",
            "verification_notes": "text",
            "reviewed_by": "uuid",
            "reviewed_at": "timestamp",
            "created_at": "timestamp",
            "updated_at": "timestamp"
          }
        },
        {
          "name": "employee_profile_approvals",
          "schema": {
            "id": "uuid",
            "employee_id": "uuid",
            "company_id": "uuid",
            "status": "string",
            "enriched_at": "timestamp",
            "requested_at": "timestamp",
            "reviewed_at": "timestamp",
            "reviewed_by": "uuid",
            "rejection_reason": "text",
            "created_at": "timestamp",
            "updated_at": "timestamp"
          }
        },
        {
          "name": "employee_requests",
          "schema": {
            "id": "uuid",
            "employee_id": "uuid",
            "company_id": "uuid",
            "request_type": "string",
            "title": "string",
            "description": "text",
            "status": "string",
            "requested_at": "timestamp",
            "reviewed_at": "timestamp",
            "reviewed_by": "uuid",
            "rejection_reason": "text",
            "response_notes": "text",
            "created_at": "timestamp",
            "updated_at": "timestamp"
          }
        },
        {
          "name": "directory_admins",
          "schema": {
            "id": "uuid",
            "email": "string",
            "password_hash": "string",
            "full_name": "string",
            "role": "string",
            "is_active": "boolean",
            "created_at": "timestamp",
            "updated_at": "timestamp"
          }
        },
        {
          "name": "employee_raw_data",
          "schema": {
            "id": "uuid",
            "employee_id": "uuid",
            "source": "string",
            "data": "jsonb",
            "created_at": "timestamp",
            "updated_at": "timestamp"
          }
        }
      ],
      "migrations": ["001_initial_schema"]
    },
    "api": {
      "endpoints": [
        {
          "path": "/api/fill-content-metrics",
          "method": "POST",
          "description": "Universal endpoint for microservice-to-microservice communication via Coordinator",
          "requestSchema": {
            "required": ["requester_service", "payload", "response"],
            "properties": {
              "requester_service": {"type": "string"},
              "payload": {"type": "object"},
              "response": {"type": "object"}
            }
          },
          "responseSchema": {
            "properties": {
              "requester_service": {"type": "string"},
              "response": {"type": "object"}
            }
          }
        }
      ]
    },
    "capabilities": [
      "employee management",
      "company management",
      "directory services",
      "employee profiles",
      "profile enrichment",
      "company registration",
      "employee enrollment",
      "career path enrollment",
      "learning flow enrollment",
      "organizational hierarchy",
      "department management",
      "team management",
      "employee skills",
      "employee courses",
      "learning paths",
      "chatbot integration",
      "OAuth integration",
      "profile approvals",
      "trainer management"
    ],
    "dependencies": [
      "skills-engine",
      "course-builder",
      "learner-ai",
      "learning-analytics",
      "coordinator"
    ],
    "events": {
      "publishes": [],
      "subscribes": []
    }
  }
}
